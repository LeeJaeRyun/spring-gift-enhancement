<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Product Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>

<body>
<div class="container mt-4">
    <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h4><strong>Product Management</strong></h4>
            <a th:href="@{/admin/products/create}" class="btn btn-success">상품 등록</a>
        </div>
        <div class="card-body">
            <table class="table table-bordered text-center">
                <thead class="table-light">
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Image</th>
                    <th>상세</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="product : ${products}">
                    <td th:text="${product.id}"></td>
                    <td th:text="${product.name}"></td>
                    <td th:text="${product.price + '원'}"></td>
                    <td th:text="${product.imageUrl}"></td>
                    <td>
                        <a th:href="@{'/admin/products/' + ${product.id}}" class="btn btn-sm btn-primary">상세정보</a>
                        <a th:href="@{'/admin/products/edit/' + ${product.id}}" class="btn btn-sm btn-warning">수정</a>
                        <form th:action="@{'/admin/products/' + ${product.id}}" method="post" style="display:inline;">
                            <input type="hidden" name="_method" value="delete"/>
                            <button type="submit" class="btn btn-sm btn-danger"
                                    onclick="return confirm('정말 삭제하시겠습니까?');">
                                삭제
                            </button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>

            <!-- ✅ 페이지네이션 추가 -->
            <nav th:if="${page.totalPages > 1}">
                <ul class="pagination justify-content-center">
                    <li class="page-item" th:classappend="${page.first} ? 'disabled'">
                        <a class="page-link" th:href="@{/admin/products(page=${page.number - 1})}">이전</a>
                    </li>
                    <li class="page-item"
                        th:each="i : ${#numbers.sequence(0, page.totalPages - 1)}"
                        th:classappend="${i == page.number} ? 'active'">
                        <a class="page-link" th:href="@{/admin/products(page=${i})}" th:text="${i + 1}">1</a>
                    </li>
                    <li class="page-item" th:classappend="${page.last} ? 'disabled'">
                        <a class="page-link" th:href="@{/admin/products(page=${page.number + 1})}">다음</a>
                    </li>
                </ul>
            </nav>

        </div>
    </div>
</div>
</body>
</html>
